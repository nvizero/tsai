

<%= form_for(@user) do |f| %>

  <% if @user.errors.any? %>
      <div id="error_explanation"  style="display:none;">
        <% @user.errors.full_messages.each do |msg| %>
          <% @mss = "#{@mss}"+"#{msg}<br>\n" %>
        <% end %>
      </div>
   <% end %>

<%= render 'comm/ckbox' , :mss => @mss%>


<section class="content">
      <div class="row">
          <!-- left column -->
          <div class="col-lg-12">
              <!-- general form elements -->
              <div class="box box-primary">
                  <div class="box-header">
                      <h3 class="box-title"><%=@table_title %></h3>
                  </div><!-- /.box-header -->



                    <div class="box-body">



                        <div class="form-group <% if !@user.errors[:username].blank? %> has-error <% end %> ">

                          <font color="red" ><%= f.label :username ,'帳號',:for =>'exampleInputEmail1' %></font>

                          <% if @user.id %>
                              <%= f.text_field :username, :class=>'form-control', :id=>"email", :disabled=>""  %>
                          <% else %>
                              <%= f.text_field :username, :class=>'form-control', :id=>"username" %>
                          <% end %>

                        </div>


                        <div class="form-group <% if !@user.errors[:email].blank? %> has-error <% end %> ">

                          <font color="red" ><%= f.label :email ,'電子信箱',:for =>'exampleInputEmail1' %></font>

                          <% if @user.id %>
                              <%= f.text_field :email, :class=>'form-control', :id=>"email", :disabled=>""  %>
                          <% else %>
                              <%= f.text_field :email, :class=>'form-control', :id=>"email", :placeholder=>"輸入email" %>
                          <% end %>

                        </div>

                        <div class="form-group <% if !@user.errors[:role_id].blank? %> has-error <% end %> ">
                          <%= f.label :role_id ,'角色',:for =>'exampleInputEmail1' %><font color="red" >*</font><br>
                          <%= f.select(:role_id, @roles.map {|m| [m.title , m.id] }) %>

                        </div>

                        <div class="form-group <% if !@user.errors[:name].blank? %> has-error <% end %> ">
                          <font color="red" ><%= f.label :name ,'姓名',:for =>'exampleInputEmail1' %></font><br>
                          <%= f.text_field :name, :class=>'form-control', :id=>"name", :placeholder=>"輪入姓名" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :boss ,'負責人',:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :boss, :class=>'form-control', :id=>"boss", :placeholder=>"負責人" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :serial_code ,'公司統編' ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :serial_code, :class=>'form-control', :id=>"serial_code", :placeholder=>"公司統編" %>
                        </div>

                        <div class="form-group">
                          <%= f.label :tel ,'電話'  ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :tel, :class=>'form-control', :id=>"rel", :placeholder=>"電話" %>
                        </div>

                        <div class="form-group">
                          <%= f.label  :company_address,'公司住址' ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :company_address, :class=>'form-control', :id=>"company_address", :placeholder=>"公司住址" %>
                        </div>

                        <div class="form-group">
                          <%= f.label  :send_address,'送貨住址' ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :send_address , :class=>'form-control', :id=>"send_address", :placeholder=>"送貨住址" %>
                        </div>

                        <div class="form-group">
                          <%= f.label  :check_date,'簽約日期'  ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_field :check_date, :class=>'form-control', :id=>"check_date", :placeholder=>"簽約日期" %>
                        </div>

                        <div class="form-group  <% if !@user.errors[:prompt].blank? %> has-error <% end %> ">
                          <font color="red" > <%= f.label  :prompt,'忘記密碼提示' , :for =>'exampleInputEmail1' %> </font>
                          <%= f.text_field :prompt, :class=>'form-control', :id=>"prompt", :placeholder=>"忘記密碼提示" %>

                        </div>


                        <% if check_user_is_new @user %>
                          <div class="form-group  <% if !flash[:pas].blank? %> has-error <% end %> ">
                            <font color="red" >
                              <%= f.label :password ,'密碼' ,:for =>'exampleInputEmail1' %>
                              <% if !flash[:pas].blank? %>
                                  <%=flash[:pas] %>
                              <% end %>
                            </font>
                            <%= f.password_field :password , :class=>'form-control', :id=>"password", :placeholder=>"密碼" %>
                          </div>

                          <div class="form-group  <% if !flash[:pas].blank? %> has-error <% end %> ">
                            <font color="red" >
                              <%= f.label :re_password,'認確密碼'  ,:for =>'exampleInputEmail1' %>
                              <% if !flash[:pas].blank? %>
                                  <%=flash[:pas] %>
                              <% end %>
                            </font>
                            <%= f.password_field :re_password, :class=>'form-control', :id=>"re_password", :placeholder=>"認確密碼" %>
                          </div>
                        <% end %>





                        <div class="form-group">
                          <%= f.label  :text,'備註' ,:for =>'exampleInputEmail1' %><br>
                          <%= f.text_area :text , :class=>'form-control', :id=>"text", :placeholder=>"備註" %>
                        </div>





                    </div><!-- /.box-body -->

                    <div class="box-footer">
                        <button type="submit" class="btn btn-primary">確定</button>
                    </div>


<% end %>
</div>
</div>
</div>

<script src="/admin/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
  $('document').ready(function(){
    var errors_msg =$('#error_explanation').html();

    if( errors_msg.length > 3 ){
      // alert( errors_msg );
      $('#ckbox-modal').modal('show');
    }


  })
</script>

</div>

</section>
